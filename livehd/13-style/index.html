
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../12-github/">
      
      
        <link rel="next" href="../../pyrope/00-hwdesign/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Coding Style - LiveHD and Pyrope</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CFira+Code:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Fira Code"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/table.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#coding-style" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="LiveHD and Pyrope" class="md-header__button md-logo" aria-label="LiveHD and Pyrope" data-md-component="logo">
      
  <img src="../../assets/pyrope5.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            LiveHD and Pyrope
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Coding Style
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/masc-ucsc/livehd" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="LiveHD and Pyrope" class="md-nav__button md-logo" aria-label="LiveHD and Pyrope" data-md-component="logo">
      
  <img src="../../assets/pyrope5.png" alt="logo">

    </a>
    LiveHD and Pyrope
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/masc-ucsc/livehd" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LiveHD and Pyrope
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Livehd
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Livehd
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../00-intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01-install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02-usage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Usage
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03-memory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Memory and concurrency
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../04-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    C++ API
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../05-lgraph/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LGraph
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06-lnast/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LNAST
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../10-bazel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Bazel build
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../10b-3rdparty/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    3rd Party
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../11-pass/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Creating a Pass
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../12-github/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    GitHub Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Coding Style
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Coding Style
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overall" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overall
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comments" class="md-nav__link">
    <span class="md-ellipsis">
      
        comments
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#strings" class="md-nav__link">
    <span class="md-ellipsis">
      
        strings
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#variable-naming-rules" class="md-nav__link">
    <span class="md-ellipsis">
      
        Variable naming rules
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-handling-and-exceptions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Error handling and exceptions
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#no-tabs-indentation-is-2-spaces" class="md-nav__link">
    <span class="md-ellipsis">
      
        No tabs, indentation is 2 spaces
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#include-order" class="md-nav__link">
    <span class="md-ellipsis">
      
        Include order
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#keep-column-widths-short" class="md-nav__link">
    <span class="md-ellipsis">
      
        Keep column widths short
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#avoid-trailing-spaces" class="md-nav__link">
    <span class="md-ellipsis">
      
        Avoid trailing spaces
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-c14-iterators-not-iterator" class="md-nav__link">
    <span class="md-ellipsis">
      
        Use C++14 iterators not ::iterator
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-auto-or-const-auto-when-possible" class="md-nav__link">
    <span class="md-ellipsis">
      
        Use "auto", or "const auto", when possible.
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#const-and-local-variables" class="md-nav__link">
    <span class="md-ellipsis">
      
        const and local variables
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#do-not-use-stdunordered_set-stdmap-use-flat_hash_map-or-flat_hash_set-from-abseil" class="md-nav__link">
    <span class="md-ellipsis">
      
        Do not use std::unordered_set, std::map, use flat_hash_map or flat_hash_set from abseil
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#some-common-idioms-to-handle-mapsets" class="md-nav__link">
    <span class="md-ellipsis">
      
        Some common idioms to handle map/sets
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-abslspan-instead-of-stdvector-as-return-argument" class="md-nav__link">
    <span class="md-ellipsis">
      
        Use absl::Span instead of std::vector as return argument
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pass-by-reference-and-use-const-when-possible" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pass by reference and use "const" when possible
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#avoid-dynamic-allocation-as-much-as-possible" class="md-nav__link">
    <span class="md-ellipsis">
      
        Avoid dynamic allocation as much as possible
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#do-not-use-newdelete-keywords-use-smart-pointers-if-needed-very-very-rare" class="md-nav__link">
    <span class="md-ellipsis">
      
        Do not use "new"/"delete" keywords. Use smart pointers if needed (VERY VERY rare)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-fmtprint-to-print-messages-for-debugging" class="md-nav__link">
    <span class="md-ellipsis">
      
        Use fmt::print to print messages for debugging
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-accessors-consistently" class="md-nav__link">
    <span class="md-ellipsis">
      
        Use accessors consistently
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-bitarray-class-to-have-a-compact-bitvector-marker" class="md-nav__link">
    <span class="md-ellipsis">
      
        Use bitarray class to have a compact bitvector marker
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-iassert-extensively-be-meaningful-whenever-possible-in-assertions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Use iassert extensively / be meaningful whenever possible in assertions
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#develop-in-debug-mode-and-benchmark-in-release-mode" class="md-nav__link">
    <span class="md-ellipsis">
      
        Develop in debug mode and benchmark in release mode
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-compact-ifelse-brackets" class="md-nav__link">
    <span class="md-ellipsis">
      
        Use compact if/else brackets
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#decide-how-to-use-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Decide how to use attributes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Decide how to use attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-non-persistent-annotations" class="md-nav__link">
    <span class="md-ellipsis">
      
        The Non-Persistent Annotations
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#avoid-code-duplication" class="md-nav__link">
    <span class="md-ellipsis">
      
        Avoid code duplication
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Pyrope
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Pyrope
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pyrope/00-hwdesign/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Hardware Design
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pyrope/01-introduction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pyrope/02-basics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Basic syntax
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pyrope/03-bundle/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tuples
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pyrope/04-variables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Variables and types
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pyrope/05-assert/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Verification
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pyrope/05b-statements/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Statements
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pyrope/06-functions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lambdas
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pyrope/06b-instantiation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Instantiation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pyrope/06c-pipelining2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pipelining
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pyrope/07-typesystem/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Type system
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pyrope/07b-structtype/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Structural Typing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pyrope/08-memories/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Memories
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pyrope/09-stdlib/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pyrope std lib
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pyrope/10-internals/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Internals
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pyrope/10b-vslang/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    vs Other Languages
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pyrope/11-deprecated/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Deprecated or Future
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pyrope/11b-deprecated_pipelining/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Deprecated Pipelining
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pyrope/12-lnast/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LNAST
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pyrope/13-stdlib/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pyrope Standard Library
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pyrope/14a-small_pyrope/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Small Pyrope - Minimal Hardware Description Language
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pyrope/14b-small_pyrope_todo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Small Pyrope â€“ TODO Features
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pyrope/14c-small_pyrope_summary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Small Pyrope - Summary
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_24" >
        
          
          <label class="md-nav__link" for="__nav_3_24" id="__nav_3_24_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Node modules
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_24_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_24">
            <span class="md-nav__icon md-icon"></span>
            
  
    Node modules
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_24_1" >
        
          
          <label class="md-nav__link" for="__nav_3_24_1" id="__nav_3_24_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    @openai
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_24_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_24_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    @openai
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_24_1_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../pyrope/node_modules/%40openai/codex/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Codex
  

    
  </span>
  
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_3_24_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_24_1_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Codex
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_25" >
        
          
          <label class="md-nav__link" for="__nav_3_25" id="__nav_3_25_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Old
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_25_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_25">
            <span class="md-nav__icon md-icon"></span>
            
  
    Old
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pyrope/old/small_pyrope_flow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Small pyrope flow
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overall" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overall
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comments" class="md-nav__link">
    <span class="md-ellipsis">
      
        comments
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#strings" class="md-nav__link">
    <span class="md-ellipsis">
      
        strings
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#variable-naming-rules" class="md-nav__link">
    <span class="md-ellipsis">
      
        Variable naming rules
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-handling-and-exceptions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Error handling and exceptions
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#no-tabs-indentation-is-2-spaces" class="md-nav__link">
    <span class="md-ellipsis">
      
        No tabs, indentation is 2 spaces
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#include-order" class="md-nav__link">
    <span class="md-ellipsis">
      
        Include order
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#keep-column-widths-short" class="md-nav__link">
    <span class="md-ellipsis">
      
        Keep column widths short
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#avoid-trailing-spaces" class="md-nav__link">
    <span class="md-ellipsis">
      
        Avoid trailing spaces
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-c14-iterators-not-iterator" class="md-nav__link">
    <span class="md-ellipsis">
      
        Use C++14 iterators not ::iterator
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-auto-or-const-auto-when-possible" class="md-nav__link">
    <span class="md-ellipsis">
      
        Use "auto", or "const auto", when possible.
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#const-and-local-variables" class="md-nav__link">
    <span class="md-ellipsis">
      
        const and local variables
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#do-not-use-stdunordered_set-stdmap-use-flat_hash_map-or-flat_hash_set-from-abseil" class="md-nav__link">
    <span class="md-ellipsis">
      
        Do not use std::unordered_set, std::map, use flat_hash_map or flat_hash_set from abseil
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#some-common-idioms-to-handle-mapsets" class="md-nav__link">
    <span class="md-ellipsis">
      
        Some common idioms to handle map/sets
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-abslspan-instead-of-stdvector-as-return-argument" class="md-nav__link">
    <span class="md-ellipsis">
      
        Use absl::Span instead of std::vector as return argument
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pass-by-reference-and-use-const-when-possible" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pass by reference and use "const" when possible
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#avoid-dynamic-allocation-as-much-as-possible" class="md-nav__link">
    <span class="md-ellipsis">
      
        Avoid dynamic allocation as much as possible
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#do-not-use-newdelete-keywords-use-smart-pointers-if-needed-very-very-rare" class="md-nav__link">
    <span class="md-ellipsis">
      
        Do not use "new"/"delete" keywords. Use smart pointers if needed (VERY VERY rare)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-fmtprint-to-print-messages-for-debugging" class="md-nav__link">
    <span class="md-ellipsis">
      
        Use fmt::print to print messages for debugging
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-accessors-consistently" class="md-nav__link">
    <span class="md-ellipsis">
      
        Use accessors consistently
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-bitarray-class-to-have-a-compact-bitvector-marker" class="md-nav__link">
    <span class="md-ellipsis">
      
        Use bitarray class to have a compact bitvector marker
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-iassert-extensively-be-meaningful-whenever-possible-in-assertions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Use iassert extensively / be meaningful whenever possible in assertions
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#develop-in-debug-mode-and-benchmark-in-release-mode" class="md-nav__link">
    <span class="md-ellipsis">
      
        Develop in debug mode and benchmark in release mode
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-compact-ifelse-brackets" class="md-nav__link">
    <span class="md-ellipsis">
      
        Use compact if/else brackets
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#decide-how-to-use-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Decide how to use attributes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Decide how to use attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-non-persistent-annotations" class="md-nav__link">
    <span class="md-ellipsis">
      
        The Non-Persistent Annotations
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#avoid-code-duplication" class="md-nav__link">
    <span class="md-ellipsis">
      
        Avoid code duplication
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="coding-style">Coding Style<a class="headerlink" href="#coding-style" title="Permanent link">&para;</a></h1>
<p>These are the coding style rules for LiveHD C++. Each rule can be broken, but it
should be VERY rare, and a small comment should be placed explaining why.</p>
<h2 id="overall">Overall<a class="headerlink" href="#overall" title="Permanent link">&para;</a></h2>
<ul>
<li>When possible keep the system simple. Complexity is the enemy of maintenance.</li>
<li>Deprecate no longer used features.</li>
<li>Try to reduce friction. This means to avoid hidden/complex steps.</li>
<li>Every main API should have a unit test for testing but also to demonstrate usage.</li>
</ul>
<h2 id="comments">comments<a class="headerlink" href="#comments" title="Permanent link">&para;</a></h2>
<p>Code should be the comments, try to keep comments concise. They should explain
the WHY not the HOW. The code is the HOW.</p>
<p>Labels used in comments:</p>
<div class="highlight"><pre><span></span><code>// FIXME: Known bug/issue but no time to fix it at the moment

// TODO: Code improvement that will improve perf/quality/??? but no time at the moment

// WARNING: message for some &quot;strange&quot; &quot;weird&quot; code that if changes has effects
// (bug). Usually, this is a &quot;not nice&quot; code that must be kept for some reason.

// NOTE: Any comment that you want to remember something about (not critical)

// STYLE: why you broke a style rule (pointers, iterator...)
</code></pre></div>
<h2 id="strings">strings<a class="headerlink" href="#strings" title="Permanent link">&para;</a></h2>
<p>We use std::string and std::string_view. These are the rules:</p>
<ul>
<li>
<p>Arguments for functions are always std::string_view (no const std::string &amp;)</p>
</li>
<li>
<p>If the return argument is not allocated in the function, we return a std::string_view</p>
</li>
<li>
<p>If the return argument can be a new string, the function returns std::string</p>
</li>
<li>
<p>Use the absl::StrCat, absl::StrAppend, absl::StrSplit when possible</p>
</li>
<li>
<p>To convert to/from integers use str_tools::to_i to_hex ...</p>
</li>
<li>
<p>Use str_tools for sub-string operations like str_tools::ends_with </p>
</li>
</ul>
<h2 id="variable-naming-rules">Variable naming rules<a class="headerlink" href="#variable-naming-rules" title="Permanent link">&para;</a></h2>
<ul>
<li>No camelCase. Use underscores to separate words:
<div class="highlight"><pre><span></span><code><span class="n">foo_bar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Foo_bar</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
</code></pre></div></li>
<li>Use plural for containers with multiple entries like vector, singular otherwise
<div class="highlight"><pre><span></span><code><span class="n">elem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">entries</span><span class="p">[</span><span class="n">index</span><span class="p">];</span>
</code></pre></div></li>
<li>Classes/types/enums start with uppercase. Lowercase otherwise
<div class="highlight"><pre><span></span><code><span class="n">val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">My_enum</span><span class="o">::</span><span class="n">Big</span><span class="p">;</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Sweet_potato</span><span class="w"> </span><span class="p">{</span>
</code></pre></div></li>
</ul>
<h2 id="error-handling-and-exceptions">Error handling and exceptions<a class="headerlink" href="#error-handling-and-exceptions" title="Permanent link">&para;</a></h2>
<p>Use the Pass::error or Pass:warn for error and likely error (warn). Internally, error generates
and exception capture by the main lgshell to move to the next task.</p>
<div class="highlight"><pre><span></span><code><span class="n">Pass</span><span class="o">::</span><span class="n">error</span><span class="p">(</span><span class="s">&quot;inou_yaml: can only have a yaml_input or a graph_name, not both&quot;</span><span class="p">);</span>
<span class="n">Pass</span><span class="o">::</span><span class="n">warn</span><span class="p">(</span><span class="s">&quot;inou_yaml.to_lg: output:{} input:{} graph:{}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">output</span><span class="p">,</span><span class="w"> </span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="n">graph_name</span><span class="p">);</span>
</code></pre></div>
<h2 id="no-tabs-indentation-is-2-spaces">No tabs, indentation is 2 spaces<a class="headerlink" href="#no-tabs-indentation-is-2-spaces" title="Permanent link">&para;</a></h2>
<p>Make sure to configure your editor to use 2 spaces</p>
<p>You can configure your text editor to do this automatically</p>
<h2 id="include-order">Include order<a class="headerlink" href="#include-order" title="Permanent link">&para;</a></h2>
<p>First do C includes (try to avoid when possible), then an empty line with C++
includes, then an empty line followed with lgraph related includes. E.g:</p>
<div class="highlight"><pre><span></span><code>#include &lt;sys/types.h&gt;
#include &lt;dirent.h&gt;

#include &lt;iostream&gt;
#include &lt;set&gt;

#include &quot;graph_library.hpp&quot;
#include &quot;lgedgeiter.hpp&quot;
</code></pre></div>
<h2 id="keep-column-widths-short">Keep column widths short<a class="headerlink" href="#keep-column-widths-short" title="Permanent link">&para;</a></h2>
<ul>
<li>Less than 120 characters if at all possible (meaning not compromising
  readability)</li>
</ul>
<p>You can configure your text editor to do this automatically</p>
<h2 id="avoid-trailing-spaces">Avoid trailing spaces<a class="headerlink" href="#avoid-trailing-spaces" title="Permanent link">&para;</a></h2>
<p>You can configure your text editor to highlight them.
 https://github.com/ntpeters/vim-better-whitespace</p>
<h2 id="use-c14-iterators-not-iterator">Use C++14 iterators not ::iterator<a class="headerlink" href="#use-c14-iterators-not-iterator" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="k">for</span><span class="p">(</span><span class="k">auto</span><span class="w"> </span><span class="n">idx</span><span class="o">:</span><span class="n">g</span><span class="o">-&gt;</span><span class="n">unordered</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="p">}</span>
</code></pre></div>
<p>Use structured returns when iterator is returned for cleaner code:</p>
<div class="highlight"><pre><span></span><code><span class="k">for</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="o">&amp;</span><span class="p">[</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">id</span><span class="p">]</span><span class="o">:</span><span class="n">name2id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// ...</span>
</code></pre></div>
<h2 id="use-auto-or-const-auto-when-possible">Use "auto", or "const auto", when possible.<a class="headerlink" href="#use-auto-or-const-auto-when-possible" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="k">for</span><span class="p">(</span><span class="k">auto</span><span class="w"> </span><span class="n">idx</span><span class="o">:</span><span class="n">g</span><span class="o">-&gt;</span><span class="n">unordered</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">for</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="o">&amp;</span><span class="n">c</span><span class="o">:</span><span class="n">g</span><span class="o">-&gt;</span><span class="n">out_edges</span><span class="p">(</span><span class="n">idx</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</code></pre></div>
<h2 id="const-and-local-variables">const and local variables<a class="headerlink" href="#const-and-local-variables" title="Permanent link">&para;</a></h2>
<p>It may be too verbose to write const all the time. The coding style request to use 
const (when possible) in iterators and pointers. The others are up to the programmer.</p>
<h2 id="do-not-use-stdunordered_set-stdmap-use-flat_hash_map-or-flat_hash_set-from-abseil">Do not use std::unordered_set, std::map, use flat_hash_map or flat_hash_set from abseil<a class="headerlink" href="#do-not-use-stdunordered_set-stdmap-use-flat_hash_map-or-flat_hash_set-from-abseil" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;absl/container/flat_hash_map.h&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;absl/container/flat_hash_set.h&quot;</span>

<span class="n">absl</span><span class="o">::</span><span class="n">flat_hash_map</span><span class="o">&lt;</span><span class="n">Index_ID</span><span class="p">,</span><span class="w"> </span><span class="n">RTLIL</span><span class="o">::</span><span class="n">Wire</span><span class="w"> </span><span class="o">*&gt;</span><span class="w">   </span><span class="n">my_example</span><span class="p">;</span>
</code></pre></div>
<h2 id="some-common-idioms-to-handle-mapsets">Some common idioms to handle map/sets<a class="headerlink" href="#some-common-idioms-to-handle-mapsets" title="Permanent link">&para;</a></h2>
<p>Traverse the map/set, and as it traverses decide to erase some of the entries:
<div class="highlight"><pre><span></span><code><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">auto</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">m</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span><span class="w"> </span><span class="n">end</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">m</span><span class="p">.</span><span class="n">end</span><span class="p">();</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">end</span><span class="p">;)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">condition_to_erase_it</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">m</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span><span class="n">it</span><span class="o">++</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="o">++</span><span class="n">it</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
<p>To check if a key is present:
<div class="highlight"><pre><span></span><code><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">set</span><span class="p">.</span><span class="n">contains</span><span class="p">(</span><span class="n">key_value</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="p">}</span>
</code></pre></div></p>
<h2 id="use-abslspan-instead-of-stdvector-as-return-argument">Use absl::Span instead of std::vector as return argument<a class="headerlink" href="#use-abslspan-instead-of-stdvector-as-return-argument" title="Permanent link">&para;</a></h2>
<p>absl::Span is the equivalent of string_view for a string but for vectors. Like
string_view, it does not have ownership, and the size in the span can decrease
(not increase) without changing the original vector with "subspan". Faster and
more functional, no reason to return "const std::vector<Foo> &amp;", instead return
"absl::Span<Foo>".</p>
<div class="highlight"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;absl/types/span.h&quot;</span>

<span class="n">absl</span><span class="o">::</span><span class="n">Span</span><span class="o">&lt;</span><span class="n">Sub_node</span><span class="o">&gt;</span><span class="w">    </span><span class="n">get_sub_nodes</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">I</span><span class="p">(</span><span class="n">sub_nodes</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="o">&gt;=</span><span class="mi">1</span><span class="p">);</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">absl</span><span class="o">::</span><span class="n">MakeSpan</span><span class="p">(</span><span class="n">sub_nodes</span><span class="p">).</span><span class="n">subspan</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w"> </span><span class="c1">// Skip first element from vector</span>
<span class="p">};</span>
</code></pre></div>
<h2 id="pass-by-reference-and-use-const-when-possible">Pass by reference and use "const" when possible<a class="headerlink" href="#pass-by-reference-and-use-const-when-possible" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">print</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Sub_node</span><span class="o">&amp;</span><span class="w"> </span><span class="n">g</span><span class="p">);</span><span class="w"> </span><span class="c1">//or</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">edit</span><span class="p">(</span><span class="n">Sub_node</span><span class="o">&amp;</span><span class="w"> </span><span class="n">g</span><span class="p">);</span>
</code></pre></div>
<p>Note that older code still uses pointers, this is no longer allowed.</p>
<h2 id="avoid-dynamic-allocation-as-much-as-possible">Avoid dynamic allocation as much as possible<a class="headerlink" href="#avoid-dynamic-allocation-as-much-as-possible" title="Permanent link">&para;</a></h2>
<p>The idea is to RARELY directly allocate pointer allocation</p>
<p>Use:</p>
<div class="highlight"><pre><span></span><code><span class="n">foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Sweet_potato</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">)</span>
</code></pre></div>
<p>instead of</p>
<div class="highlight"><pre><span></span><code><span class="n">foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Sweet_potato</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">)</span>
</code></pre></div>
<h2 id="do-not-use-newdelete-keywords-use-smart-pointers-if-needed-very-very-rare">Do not use "new"/"delete" keywords. Use smart pointers if needed (VERY VERY rare)<a class="headerlink" href="#do-not-use-newdelete-keywords-use-smart-pointers-if-needed-very-very-rare" title="Permanent link">&para;</a></h2>
<p>Use:
<div class="highlight"><pre><span></span><code><span class="n">foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">Sweet_potato</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">7</span><span class="p">);</span>
</code></pre></div></p>
<p>instead of</p>
<div class="highlight"><pre><span></span><code><span class="n">foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Sweet_potato</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">)</span>
</code></pre></div>
<h2 id="use-fmtprint-to-print-messages-for-debugging">Use fmt::print to print messages for debugging<a class="headerlink" href="#use-fmtprint-to-print-messages-for-debugging" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="n">fmt</span><span class="o">::</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;This is a debug message, name = {}, id = {}</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">g</span><span class="o">-&gt;</span><span class="n">get_name</span><span class="p">(),</span><span class="w"> </span><span class="n">idx</span><span class="p">);</span>
</code></pre></div>
<h2 id="use-accessors-consistently">Use accessors consistently<a class="headerlink" href="#use-accessors-consistently" title="Permanent link">&para;</a></h2>
<ul>
<li>get_XX(): gets "const XX &amp;" from object without side effects (assert if it does not exist)<ul>
<li>operator(Y) is an alias for get_XX(Y)</li>
</ul>
</li>
<li>ref_XX(): gets "XX * " (nullptr if it does not exist)</li>
<li>find_XX(): similar to get_XX but, if it does not exist return invalid object (is_invalid())</li>
<li>setup_XX(): gets XX from object, if it does not exists, it creates it</li>
<li>create_XX(): clears previous XX from object, and creates a new and returns it</li>
<li>set_XX(): sets XX to object, it creates if it does not exist. Similar to
  create, but does not return reference.</li>
</ul>
<p>If a variable is const, it can be exposed directly without get/set accessors</p>
<p>foo = x.const_var;  // No need to have x.get_const_var()</p>
<h2 id="use-bitarray-class-to-have-a-compact-bitvector-marker">Use bitarray class to have a compact bitvector marker<a class="headerlink" href="#use-bitarray-class-to-have-a-compact-bitvector-marker" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="n">bitarray</span><span class="w"> </span><span class="nf">visited</span><span class="p">(</span><span class="n">g</span><span class="o">-&gt;</span><span class="n">max_size</span><span class="p">());</span>
</code></pre></div>
<h2 id="use-iassert-extensively-be-meaningful-whenever-possible-in-assertions">Use iassert extensively / be meaningful whenever possible in assertions<a class="headerlink" href="#use-iassert-extensively-be-meaningful-whenever-possible-in-assertions" title="Permanent link">&para;</a></h2>
<p>This usually means use meaningful variable names and conditions that are easy to understand.
If the meaning is not clear from the assertion, use a comment in the same line.
This way, when the assertion is triggered it is easy to identify the problem.</p>
<div class="highlight"><pre><span></span><code><span class="n">I</span><span class="p">(</span><span class="n">n_edges</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"> </span><span class="c1">//at least one edge needed to perform this function</span>
</code></pre></div>
<p>We use the https://github.com/masc-ucsc/iassert package. Go to the iassert for more details on the advantages
and how to allow it to use GDB with assertions.</p>
<h2 id="develop-in-debug-mode-and-benchmark-in-release-mode">Develop in debug mode and benchmark in release mode<a class="headerlink" href="#develop-in-debug-mode-and-benchmark-in-release-mode" title="Permanent link">&para;</a></h2>
<p>Extra checks should be only in debug. Debug and release must execute the same,
only checks (not behavior change) allowed in debug mode.</p>
<p>Benchmark in release. It is 2x-10x faster.</p>
<h2 id="use-compact-ifelse-brackets">Use compact if/else brackets<a class="headerlink" href="#use-compact-ifelse-brackets" title="Permanent link">&para;</a></h2>
<p>Use clang-format as configured to catch style errors. LGraph clang-format is
based on google format, but it adds several alignment directives and wider
terminal.</p>
<div class="highlight"><pre><span></span><code>   cd XXXX
   clang-format -i *pp
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">LGraph</span><span class="w"> </span><span class="o">*&gt;</span><span class="w"> </span><span class="n">Inou_yaml</span><span class="o">::</span><span class="n">generate</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">opack</span><span class="p">.</span><span class="n">graph_name</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="c1">// ...</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="c1">// ..</span>
<span class="w">  </span><span class="p">}</span>
</code></pre></div>
<h2 id="decide-how-to-use-attributes">Decide how to use attributes<a class="headerlink" href="#decide-how-to-use-attributes" title="Permanent link">&para;</a></h2>
<p>Attributes are parameters or information that an be per Node, Node_pin or Edge. In LGraph, attributes are
persistent. This means that they are kept across execution runs in the LGraph database (E.g: in lgdb).</p>
<p>For persistent attributes, the structures to use are defined in core/annotate.hpp. Any new attribute
must be added to "annotate.hpp" to preserve persistence and to make sure that they are cleared when needed.</p>
<p>Many times it is important to have information per node, but that it is not persistent across runs. For example,
when building a LGraph from Yosys, there is a need to remember pointers from yosys to LGraph. This by definition can not be persistent because pointers change across runs. For this case, there are several options.</p>
<h3 id="the-non-persistent-annotations">The Non-Persistent Annotations<a class="headerlink" href="#the-non-persistent-annotations" title="Permanent link">&para;</a></h3>
<p>If the data structure needs to keep most of the node/pins in the Lgraph, use the compact_class notation:
<div class="highlight"><pre><span></span><code><span class="n">absl</span><span class="o">::</span><span class="n">flat_hash_map</span><span class="o">&lt;</span><span class="n">SomeData</span><span class="p">,</span><span class="w"> </span><span class="n">Node_pin</span><span class="o">::</span><span class="n">Compact_class</span><span class="o">&gt;</span><span class="w"> </span><span class="n">s2pin</span><span class="p">;</span>
<span class="n">absl</span><span class="o">::</span><span class="n">flat_hash_map</span><span class="o">&lt;</span><span class="n">SomeData</span><span class="p">,</span><span class="w"> </span><span class="n">Node</span><span class="o">::</span><span class="n">Compact_class</span><span class="o">&gt;</span><span class="w">     </span><span class="n">s2node</span><span class="p">;</span>

<span class="n">SomeData</span><span class="w"> </span><span class="n">d1</span><span class="p">;</span>
<span class="n">Lgraph</span><span class="w"> </span><span class="o">*</span><span class="n">lg</span><span class="p">;</span><span class="w"> </span><span class="c1">// LGraph owning the node</span>
<span class="n">s2pin</span><span class="p">[</span><span class="n">d1</span><span class="p">]</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">node</span><span class="p">.</span><span class="n">get_driver_pin</span><span class="p">().</span><span class="n">get_compact_class</span><span class="p">();</span><span class="w"> </span><span class="c1">// Example of use getting a pint</span>
<span class="n">s2node</span><span class="p">[</span><span class="n">d1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">node</span><span class="p">.</span><span class="n">get_compact_class</span><span class="p">();</span>
<span class="k">auto</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s2pin</span><span class="p">[</span><span class="n">d1</span><span class="p">].</span><span class="n">get_node</span><span class="p">(</span><span class="n">lg</span><span class="p">).</span><span class="n">get_name</span><span class="p">();</span><span class="w">   </span><span class="c1">// Pick previously set driver name</span>
</code></pre></div></p>
<p>Another example:</p>
<div class="highlight"><pre><span></span><code><span class="n">absl</span><span class="o">::</span><span class="n">flat_hash_map</span><span class="o">&lt;</span><span class="n">Node_pin</span><span class="o">::</span><span class="n">Compact</span><span class="p">,</span><span class="w"> </span><span class="n">RTLIL</span><span class="o">::</span><span class="n">Wire</span><span class="w"> </span><span class="o">*&gt;</span><span class="w">  </span><span class="n">input_map</span><span class="p">;</span>

<span class="n">input_map</span><span class="p">[</span><span class="n">pin</span><span class="p">.</span><span class="n">get_compact</span><span class="p">()]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wire</span><span class="p">;</span>

<span class="k">auto</span><span class="w"> </span><span class="o">*</span><span class="n">wire</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">input_map</span><span class="p">[</span><span class="n">pin</span><span class="p">.</span><span class="n">get_compact</span><span class="p">()];</span>

<span class="k">for</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="o">&amp;</span><span class="p">[</span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">]</span><span class="o">:</span><span class="n">input_map</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">Node_pin</span><span class="w"> </span><span class="nf">pin</span><span class="p">(</span><span class="n">lg</span><span class="p">,</span><span class="w"> </span><span class="n">key</span><span class="p">);</span><span class="w"> </span><span class="c1">// Key is a ::Compact, not a Node_pin</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">name</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">pin</span><span class="p">.</span><span class="n">get_name</span><span class="p">();</span>
<span class="w">  </span><span class="c1">// ... Some use here</span>
<span class="p">}</span>
</code></pre></div>
<p>If the data structure just holds a small subset of the graph, you can keep the
metadata, and use Node/Node_pin directly. E.g:</p>
<div class="highlight"><pre><span></span><code><span class="n">absl</span><span class="o">::</span><span class="n">flat_hash_map</span><span class="o">&lt;</span><span class="n">SomeData</span><span class="p">,</span><span class="w"> </span><span class="n">Node_pin</span><span class="o">&gt;</span><span class="w"> </span><span class="n">s2pin</span><span class="p">;</span>
<span class="n">absl</span><span class="o">::</span><span class="n">flat_hash_map</span><span class="o">&lt;</span><span class="n">SomeData</span><span class="p">,</span><span class="w"> </span><span class="n">Node</span><span class="o">&gt;</span><span class="w">     </span><span class="n">s2node</span><span class="p">;</span>

<span class="n">SomeData</span><span class="w"> </span><span class="n">d1</span><span class="p">;</span>
<span class="n">s2pin</span><span class="p">[</span><span class="n">d1</span><span class="p">]</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">node</span><span class="p">.</span><span class="n">get_driver_pin</span><span class="p">();</span><span class="w"> </span><span class="c1">// Example of use getting a pint</span>
<span class="n">s2node</span><span class="p">[</span><span class="n">d1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">node</span><span class="p">;</span>
<span class="k">auto</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s2pin</span><span class="p">[</span><span class="n">d1</span><span class="p">].</span><span class="n">get_name</span><span class="p">();</span><span class="w">   </span><span class="c1">// Pick previously set driver name</span>
</code></pre></div>
<p>In this case, it is fine to use the full Node, Node_pin, or Edge. This has some
pointers inside, but it is OK because it is not persistent.</p>
<h2 id="avoid-code-duplication">Avoid code duplication<a class="headerlink" href="#avoid-code-duplication" title="Permanent link">&para;</a></h2>
<p>The rule is that if the same code appears in 3 places, it should be refactored</p>
<p>Tool to detect duplication
<div class="highlight"><pre><span></span><code>    find . -name &#39;*.?pp&#39; | grep -v test &gt;list.txt
    duplo -ml 12 -pt 90 list.txt report.txt
</code></pre></div></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["search.suggest", "navigation.sections", "navigation.instant", "navigation.indexes"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="../../javascripts/config.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
      
    
  </body>
</html>