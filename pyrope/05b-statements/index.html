
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../05-assert/">
      
      
        <link rel="next" href="../06-functions/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Statements - LiveHD and Pyrope</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CFira+Code:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Fira Code"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/table.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#statements" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="LiveHD and Pyrope" class="md-header__button md-logo" aria-label="LiveHD and Pyrope" data-md-component="logo">
      
  <img src="../../assets/pyrope5.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            LiveHD and Pyrope
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Statements
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/masc-ucsc/livehd" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="LiveHD and Pyrope" class="md-nav__button md-logo" aria-label="LiveHD and Pyrope" data-md-component="logo">
      
  <img src="../../assets/pyrope5.png" alt="logo">

    </a>
    LiveHD and Pyrope
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/masc-ucsc/livehd" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LiveHD and Pyrope
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Livehd
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Livehd
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../livehd/00-intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../livehd/01-install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../livehd/02-usage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Usage
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../livehd/03-memory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Memory and concurrency
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../livehd/04-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    C++ API
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../livehd/05-lgraph/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LGraph
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../livehd/06-lnast/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LNAST
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../livehd/10-bazel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Bazel build
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../livehd/10b-3rdparty/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    3rd Party
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../livehd/11-pass/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Creating a Pass
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../livehd/12-github/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    GitHub Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../livehd/13-style/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Coding Style
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Pyrope
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Pyrope
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../00-hwdesign/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Hardware Design
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01-introduction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02-basics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Basic syntax
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03-bundle/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tuples
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../04-variables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Variables and types
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../05-assert/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Verification
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Statements
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Statements
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#conditional-ifelifelse" class="md-nav__link">
    <span class="md-ellipsis">
      
        Conditional (if/elif/else)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unique-parallel-conditional-match" class="md-nav__link">
    <span class="md-ellipsis">
      
        Unique parallel conditional (match)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gate-statements-whenunless" class="md-nav__link">
    <span class="md-ellipsis">
      
        Gate statements (when/unless)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#code-block" class="md-nav__link">
    <span class="md-ellipsis">
      
        Code block
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#loop-for" class="md-nav__link">
    <span class="md-ellipsis">
      
        Loop (for)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Loop (for)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#code-block-control" class="md-nav__link">
    <span class="md-ellipsis">
      
        Code block control
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#whileloop" class="md-nav__link">
    <span class="md-ellipsis">
      
        while/loop
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#defer" class="md-nav__link">
    <span class="md-ellipsis">
      
        defer
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-test" class="md-nav__link">
    <span class="md-ellipsis">
      
        Testing (test)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Testing (test)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#test-only-statements" class="md-nav__link">
    <span class="md-ellipsis">
      
        Test only statements
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06-functions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lambdas
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06b-instantiation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Instantiation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06c-pipelining2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pipelining
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../07-typesystem/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Type system
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../07b-structtype/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Structural Typing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../08-memories/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Memories
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../09-stdlib/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pyrope std lib
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../10-internals/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Internals
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../10b-vslang/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    vs Other Languages
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../11-deprecated/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Deprecated or Future
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../11b-deprecated_pipelining/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Deprecated Pipelining
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../12-lnast/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LNAST
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../13-stdlib/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pyrope Standard Library
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../14a-small_pyrope/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Small Pyrope - Minimal Hardware Description Language
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../14b-small_pyrope_todo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Small Pyrope â€“ TODO Features
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../14c-small_pyrope_summary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Small Pyrope - Summary
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_24" >
        
          
          <label class="md-nav__link" for="__nav_3_24" id="__nav_3_24_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Node modules
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_24_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_24">
            <span class="md-nav__icon md-icon"></span>
            
  
    Node modules
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_24_1" >
        
          
          <label class="md-nav__link" for="__nav_3_24_1" id="__nav_3_24_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    @openai
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_24_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_24_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    @openai
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_24_1_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../node_modules/%40openai/codex/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Codex
  

    
  </span>
  
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_3_24_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_24_1_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Codex
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_25" >
        
          
          <label class="md-nav__link" for="__nav_3_25" id="__nav_3_25_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Old
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_25_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_25">
            <span class="md-nav__icon md-icon"></span>
            
  
    Old
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../old/small_pyrope_flow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Small pyrope flow
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#conditional-ifelifelse" class="md-nav__link">
    <span class="md-ellipsis">
      
        Conditional (if/elif/else)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unique-parallel-conditional-match" class="md-nav__link">
    <span class="md-ellipsis">
      
        Unique parallel conditional (match)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gate-statements-whenunless" class="md-nav__link">
    <span class="md-ellipsis">
      
        Gate statements (when/unless)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#code-block" class="md-nav__link">
    <span class="md-ellipsis">
      
        Code block
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#loop-for" class="md-nav__link">
    <span class="md-ellipsis">
      
        Loop (for)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Loop (for)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#code-block-control" class="md-nav__link">
    <span class="md-ellipsis">
      
        Code block control
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#whileloop" class="md-nav__link">
    <span class="md-ellipsis">
      
        while/loop
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#defer" class="md-nav__link">
    <span class="md-ellipsis">
      
        defer
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-test" class="md-nav__link">
    <span class="md-ellipsis">
      
        Testing (test)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Testing (test)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#test-only-statements" class="md-nav__link">
    <span class="md-ellipsis">
      
        Test only statements
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="statements">Statements<a class="headerlink" href="#statements" title="Permanent link">&para;</a></h1>
<h2 id="conditional-ifelifelse">Conditional (<code>if</code>/<code>elif</code>/<code>else</code>)<a class="headerlink" href="#conditional-ifelifelse" title="Permanent link">&para;</a></h2>
<p>Pyrope uses a typical <code>if</code>, <code>elif</code>, <code>else</code> sequence found in most languages.
Before the if starts, there is an optional keyword <code>unique</code> that enforces that
a single condition is true in the if/elif chain. This is useful for synthesis
which allows a parallel mux. The <code>unique</code> is a cleaner way to write an
<code>optimize</code> statement.</p>
<p>The <code>if</code> sequence can be used in expressions too.</p>
<div class="highlight"><pre><span></span><code>a = unique if x1 == 1 {
    300
  }elif x2 == 2 {
    400
  }else{
    500
  }

mut x = ?
if a { x = 3 } else { x = 4 }
</code></pre></div>
<p>The equivalent code with an explicit <code>optimize</code>, but unlike the <code>optimize</code>, the
<code>unique</code> will guarantee to generate the <code>hotmux</code> statement.</p>
<div class="highlight"><pre><span></span><code>optimize !(x1==1 and x2==2)
a = if x1 == 1 {
    300
  }elif x2 == 2 {
    400
  }else{
    500
  }
</code></pre></div>
<p>Like several modern programming languages, there can be a list of expressions
in the evaluation condition. If variables are declared, they are restricted to
the remaining if/else statement blocks.</p>
<div class="highlight"><pre><span></span><code>mut tmp = x+1

if mut x1=x+1; x1 == tmp {
   puts &quot;x1:{} is the same as tmp:{}&quot;, x1, tmp
}elif mut x2=x+2; x2 == tmp {
   puts &quot;x1:{} != x2:{} == tmp:{}&quot;, x1, x2, tmp
}
</code></pre></div>
<h2 id="unique-parallel-conditional-match">Unique parallel conditional (<code>match</code>)<a class="headerlink" href="#unique-parallel-conditional-match" title="Permanent link">&para;</a></h2>
<p>The <code>match</code> statement is similar to a chain of unique if/elif, like the <code>unique
if/elif</code> sequence, one of the options in the match must be true. The difference
is that one of the entries must be truth or an error is generated. This makes
the <code>match</code> statement a replacement for the common "unique parallel case"
Verilog directive. The <code>match</code> statement behaves like also having an <code>optimize</code>
statement which allows for more efficient code generation than a sequence of
<code>if/else</code>.</p>
<p>In addition to functionality, the syntax is different to avoid redundancy.
<code>match</code> joins the match expression with the beginning of the matching entry must
form a valid expression.</p>
<div class="highlight"><pre><span></span><code>x = 1
match x {
  == 1            { puts &quot;always true&quot; }
  in 2,3          { puts &quot;never&quot;       }
}
// It is equivalent to:
unique if x == 1  { puts &quot;always true&quot; }
elif x in (2,3)   { puts &quot;never&quot;       }
else              { assert false       }
</code></pre></div>
<p>Like the <code>if</code>, it can also be used as an expression.</p>
<div class="highlight"><pre><span></span><code>mut hot = match x {
    == 0sb001 { a }
    == 0sb010 { b }
    == 0sb100 { c }
  }

// Equivalent
optimize (x==0sb001 or x==0sb010 or x==0sb100)
mut hot2 = __hotmux(x, a, b, c)

assert hot==hot2
</code></pre></div>
<p>Like the <code>if</code> statement, a sequence of statements and declarations are possible in the match statement.</p>
<div class="highlight"><pre><span></span><code>match const one=1 ; one ++ (2) {
  == (1,2) { puts &quot;one:{}&quot;, one }      // should always hit
}
</code></pre></div>
<p>Since the <code>==</code> is the most common condition in the <code>match</code> statement, it can be
omitted.</p>
<div class="highlight"><pre><span></span><code>for x in 1..=5 {
  const v1 = match x {
    3 { &quot;three&quot; }
    4 { &quot;four&quot; }
    else { &quot;neither&quot;}
  }

  const v2 = match x {
    == 3 { &quot;three&quot; }
    == 4 { &quot;four&quot; }
    else { &quot;neither&quot;}
  }
  cassert v1 == v2
}
</code></pre></div>
<h2 id="gate-statements-whenunless">Gate statements (<code>when</code>/<code>unless</code>)<a class="headerlink" href="#gate-statements-whenunless" title="Permanent link">&para;</a></h2>
<p>A simple statement like assignments, variable declarations, and function calls
and returns can be gated or not executed with a <code>when</code> or <code>unless</code> statement.
This is similar to an <code>if</code> statement, but the difference is that the statement
is in the current scope, not creating a new scope. This allows cleaner more
compact syntax.</p>
<div class="highlight"><pre><span></span><code>mut a = 3
a += 1 when false             // never executes
assert a == 3
assert a == 1000 when a &gt; 10  // assert never executed either

reg my = 3 when some_condition  // no register declared otherwise

return &quot;fail&quot; unless success_condition
</code></pre></div>
<p>Complex assignments like <code>a |&gt; b(1) |&gt; c</code> can not be gated because it is not
clear if the gated applies to the last call or the whole pipeline sequence.
Similarly, gating ifs/match statements do not make much sense. As a result,
<code>when</code>/<code>unless</code> can only be applied to assignments, function calls, and code
block control statements (<code>return</code>, <code>break</code>, <code>continue</code>).</p>
<h2 id="code-block">Code block<a class="headerlink" href="#code-block" title="Permanent link">&para;</a></h2>
<p>A code block is a sequence of statements delimited by <code>{</code> and <code>}</code>. The
functionality is the same as in other languages. Variables declared within
a code block are not visible outside the code block. In other words, code block
variables have scope from definition until the end of the code block.</p>
<p>Code blocks are different from lambdas. A lambda consists of a code block but
it has several differences. In lambdas, (1) variables defined in upper scopes
are accessed inside as immutable copies only when captured by scope; (2) inputs
and outputs could be constrained, and (3) the <code>return</code> statement finishes a
lambda not a code block.</p>
<p>The main features of code blocks:</p>
<ul>
<li>
<p>Code blocks define a new scope. New variable declarations inside are not visible outside it.</p>
</li>
<li>
<p>Code blocks do not allow variable declaration shadowing.</p>
</li>
<li>
<p>Expressions can have multiple code blocks but they are not allowed to have
  side-effects for variables outside the code block. The <a href="../02-basics/#evaluation-order">evaluation
  order</a> provides more details on expressions
  evaluation order.</p>
</li>
<li>
<p>When used in an expression or lambda, the last statement in the lambda code
  block can be an expression. It is not needed to add the <code>return</code> keyword in
  this case.</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code>{
  mut x=1
  mut z=_
  {
    z = 10
    mut x=_           // compiler error, &#39;x&#39; is a shawdow variable
  }
  assert z == 10
}
const zz = x            // compile error, `x` is out of scope

mut yy = {const x=3 ; 33/3} + 1
assert yy == 12
const xx = {yy=1 ; 33}  // compile error, &#39;yy&#39; has side effects

if {const a=1+yy; 13&lt;a} {
  // a is not visible in this scope
  some_code()
}

const doit = comb(f,a) {
  const x = f(a)
  assert x == 7
  return 3
}

const z3 = doit(fun(a) {
  assert a!=0
  return 7             // exist the current lambda
  100                  // never reached statement
}, 33)
cassert z3 == 3
</code></pre></div>
<h2 id="loop-for">Loop (<code>for</code>)<a class="headerlink" href="#loop-for" title="Permanent link">&para;</a></h2>
<p>The <code>for</code> iterates over the first-level elements in a tuple or the values in a
range.  In all the cases, the number of loop iterations must be known at
compile time. The loop exit condition can not be run-time data-dependent.</p>
<p>The loop can have an early exit when calling <code>break</code> and skip of the current
iteration with the <code>continue</code> keyword.</p>
<div class="highlight"><pre><span></span><code>for i in 0..&lt;100 {
 some_code(i)
}

mut bund = (1,2,3,4)
for (index,i) in bund.enumerate() {
  assert bund[j] == i
}
</code></pre></div>
<div class="highlight"><pre><span></span><code>const b = (a=1,b=3,c=5,7,11)
assert b.keys() == (&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;&#39;, &#39;&#39;)
assert b.enumerate() == ((0,1), (1,3), (2,5), (3,7), (4,11))
const xx= zip(b.keys(), b.enumerate())
cassert xx == ((&#39;a&#39;,0,a=1), (&#39;b&#39;,1,b=3), (&#39;c&#39;,2,c=5), (&#39;&#39;,3,7), (&#39;&#39;,4,11))

for (key,index,i) in zip(keys(b),b.enumerate()) {
  assert i==1  implies (index==0 and key == &#39;a&#39;)
  assert i==3  implies (index==1 and key == &#39;b&#39;)
  assert i==5  implies (index==2 and key == &#39;c&#39;)
  assert i==7  implies (index==3 and key == &#39;&#39; )
  assert i==11 implies (index==4 and key == &#39;&#39; )
}

const c = ((1,a=3), b=4, c=(x=1,y=6))
assert c.enumerate() == ((0,(1,a=3)), (1,b=4), (2,c=(x=1,y=6)))
</code></pre></div>
<p>The <code>for</code> can also be used in an expression that allows building comprehensions
to initialize arrays. Pyrope uses a comprehension similar to Julia or Python.</p>
<div class="highlight"><pre><span></span><code>mut c = for i in 1..&lt;5 { mut xx = i }  // compile error, no expression
mut d = i for i in 0..&lt;5
mut e = i for i in 0..&lt;5 if i
assert (0,1,2,3,4) == d
assert e == (1,2,3,4)
</code></pre></div>
<p>The iterating element is copied by value, if the intention is to iterate over a
vector or array to modify the contents, a <code>ref</code> must be used. Only the element
is mutable. When a <code>ref</code> is used, it must be a variable reference, not a
function call return (value). The mutable for can not be used in
comprehensions.</p>
<div class="highlight"><pre><span></span><code>b = (1,2,3,4,5)

for x in ref b {
  x += 1
}
assert b == (2,3,4,5,6)
</code></pre></div>
<h3 id="code-block-control">Code block control<a class="headerlink" href="#code-block-control" title="Permanent link">&para;</a></h3>
<p>Code block control statements allow changing the control flow for <code>lambdas</code> and
loop statements (<code>for</code>, <code>loop</code>, and <code>while</code>). <code>return</code> can have a value.</p>
<ul>
<li>
<p><code>return</code> exits or terminates the current lambda. The current output variables
  are provided as the <code>lambda</code> output. If a tuple is provided, the tuple is the
  returned value, the output variables are not used.</p>
</li>
<li>
<p><code>break</code> terminates the closest inner loop (<code>for</code>/<code>while</code>/<code>loop</code>). If none is
  found, a compile error is generated.</p>
</li>
<li>
<p><code>continue</code> looks for the closest inner loop (<code>for</code>/<code>while</code>/<code>loop</code>) code
  block. The <code>continue</code> will perform the next loop iteration. If no inner loop
  is found, a compile error is generated.</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code>mut total:[] = ?
for a in 1..=10 {
  continue when a == 2
  total ++= a
  break when a == 3    // exit for scope
}
assert total == (1,3)

if true {
  code(x)
  continue             // compile error, no upper loop scope
}

a = 3
mut total2:[] = ?
while a&gt;0 {
  total2 ++= a
  break when a == 2    // exit if scope
  a = a - 1
  continue
  assert false         // never executed
}
assert total2 == (3,2)

total = i+10 for i in 1..=9 if i&lt;3
assert total == (11, 12)
</code></pre></div>
<h2 id="whileloop">while/loop<a class="headerlink" href="#whileloop" title="Permanent link">&para;</a></h2>
<p><code>while cond { [stmts]+ }</code> is a typical while loop found in most programming
languages. The only difference is that like with loops, the while must be fully
unrolled at compilation time. The <code>loop { [stmts]+ }</code> is equivalent to a <code>while
true { [stmts]+ }</code>.</p>
<p>Like <code>if</code>/<code>match</code>, the <code>while</code> condition can have a sequence of statements with
variable declarations visible only inside the while statements.</p>
<div class="highlight"><pre><span></span><code>// a do while contruct does not exist, but a loop is quite clean/close

mut a = 0
loop {
  puts &quot;a:{}&quot;,a

  a += 1

  break unless a &lt; 10
} // do{ ... }while(a&lt;10)
</code></pre></div>
<h2 id="defer">defer<a class="headerlink" href="#defer" title="Permanent link">&para;</a></h2>
<p>A <code>defer</code> attribute can be applied to variables. When used to read a variable,
it returns the last values written to the variable the end of the current
cycle. This is needed if we need to have any loop in connecting blocks. The
<code>defer</code> applied to a write, delays the write update to the end of the cycle.
The delayed writes happen before the delayed reads. This is also for delaying
assertion checks to the end of the cycle like post condition checks.</p>
<div class="highlight"><pre><span></span><code>mut c = 10
assert b@[1] == 33    // behaves like a postcondition
b = c@[1]
assert b == 33
c += 20
c += 3
</code></pre></div>
<p>To connect the <code>ring</code> function calls in a loop.
<div class="highlight"><pre><span></span><code>f1 = ring(a, f4@[1])
f2 = ring(b, f1)
f3 = ring(c, f2)
f4 = ring(d, f3)
</code></pre></div></p>
<p>If the intention is to read the result after being a flop, there is no need to
use the <code>defer</code>, a normal register access could do it. If the read
variables are registers, the <code>flop#[0]</code> is not the same as <code>defer</code>. The <code>flop#[0]</code>
reads the value before any update, the <code>defer</code> read, gets values after updates.</p>
<div class="highlight"><pre><span></span><code>reg counter:u32 = ?

const counter_m1 = counter#[1]  // compile error, #[1] only allowed for debug
const counter_0  = counter#[0]  // current cycle
const counter_1  = counter#[-1] // last cycle
const counter_2  = counter#[-2] // last last cycle cycle

mut deferred = counter@[1]

if counter &lt; 100 {
  counter += 1
}else{
  counter = 0
}

if counter == 10 {
  assert deferred   == 10
  assert counter_0  ==  9
  assert counter_1  ==  8
  assert counter_2  ==  7
}
</code></pre></div>
<p>The <code>defer</code> can also be applied to write/updates to the end of the cycle but
uses/reads the current value. In a way, the assignment is delayed to the end of
the current cycle. If there are many defers to the same variable, they are
ordered in program order. Notice that defer writes only makes sense if there is a
register or array because all the variables (mut and const) restart every
cycle. Defer reads make sense even for variables as it is the final value.</p>
<div class="highlight"><pre><span></span><code>reg a:u8 = 1
if a==1 {
  assert a@[1] == 200
  a@[1] = 200 // defer write
  assert a == 1
  assert a@[0] == 1
  assert a@[1] == 200
}else{
  assert a@[1] == 2
  a@[1] = 2    // defer write
}
</code></pre></div>
<p>If there are <code>defer</code> reads and <code>defer</code> assignments/writes, the defered writes are
performed ahead of the defered reads.</p>
<div class="highlight"><pre><span></span><code>mut a = 1
mut x = 100
x = a@[1]
a = 200

cassert x == 100
assert x@[1] == x
</code></pre></div>
<h2 id="testing-test">Testing (<code>test</code>)<a class="headerlink" href="#testing-test" title="Permanent link">&para;</a></h2>
<p>The test statement requires a text identifier to notify when the test fails.
The <code>test</code> is similar to a <code>puts</code> statement followed by a scope (<code>test &lt;str&gt;
[,args] { stmts+ }</code>). The statements inside the code block can not have any
effect outside.</p>
<div class="highlight"><pre><span></span><code>test &quot;my test {}&quot;, 1 {
  assert true
}
</code></pre></div>
<p>Each <code>test</code> can run in parallel, to increase the throughput, putting the
randomization outside the test statement increases the number of tests:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Parallel tests</label><label for="__tabbed_1_2">Single test</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>const add = comb(a,b) { a+b }

for i in 0..&lt;10 { // 10 tests
  const a = (-30..&lt;100).rand
  const b = (-30..&lt;100).rand

  test &quot;test {}+{}&quot;,a,b {
    assert add(a,b) == (a+b)
  }
}
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>const add = comb(a,b) { a+b }

test &quot;test 10 additions&quot; {
  for i in 0..&lt;10 { // 10 tests
    const a = (-30..&lt;100).rand
    const b = (-30..&lt;100).rand

    assert add(a,b) == (a+b)
  }
}
</code></pre></div>
</div>
</div>
</div>
<h3 id="test-only-statements">Test only statements<a class="headerlink" href="#test-only-statements" title="Permanent link">&para;</a></h3>
<p><code>test</code> code blocks are allowed to use special statements not available outside
testing blocks:</p>
<ul>
<li>
<p><code>step [ncycles]</code> advances the simulation for several cycles. The local variables
will preserve the value, the inputs may change value.</p>
</li>
<li>
<p><code>waitfor condition</code> is a syntax sugar to wait for a condition to be true.</p>
</li>
</ul>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1"><code>step</code></label><label for="__tabbed_2_2">synthesizable equivalent</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>test &quot;wait 1 cycle&quot; {
  const a = 1 + input
  puts &quot;printed every cycle input={}&quot;, a
  step 1
  puts &quot;also every cycle a={}&quot;,a  // printed on cycle later
}
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>test &quot;wait 1 cycle&quot; {
  {
    const a = 1 + input
    puts &quot;printed every cycle input={}&quot;, a
  } #&gt; {
    puts &quot;also every cycle a={}&quot;,a  // printed on cycle later
  }
}
</code></pre></div>
</div>
</div>
</div>
<p>The <code>waitfor</code> command is equivalent to a <code>while</code> with a <code>step</code>.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1"><code>waitfor</code></label><label for="__tabbed_3_2">equivalent Pyrope</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>total = 3

waitfor a_cond  // wait until a_cond is true

assert total == 3 and a_cond
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>total = 3

while !a_cond {
  step
}

assert total == 3 and a_cond
</code></pre></div>
</div>
</div>
</div>
<p>The main reason for using the <code>step</code> is that the "equivalent" <code>#&gt;[1]</code> is a more
structured construct. The <code>step</code> behaves more like a "yield" in that the next
call or cycle it will continue from there. The <code>#&gt;[1]</code> directive adds a
pipeline structure which means that it can be started each cycle. Calling a
lambda that has called a <code>step</code> and still has not finished should result in a
simulation assertion failure.</p>
<ul>
<li>
<p><code>peek</code> allows to read any flop, and lambda input or output</p>
</li>
<li>
<p><code>poke</code> is similar to <code>peek</code> but allows to set a value on any flop and lambda
  input/output.</p>
</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["search.suggest", "navigation.sections", "navigation.instant", "navigation.indexes"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="../../javascripts/config.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
      
    
  </body>
</html>